function Yd(t,e){e.Md.fetch(t),e.Zd=setTimeout(function(){e.Sd("browser timeout",e.Md.getType())},TNT.a.b.mboxTimeout),e.setEventTime("load.end")}function se(t){t.getMboxes().each(function(t){t.re(),t.setFetcher(new mboxAjaxFetcher),t.finalize()})}var mboxCopyright="Copyright 1996-2015. Adobe Systems Incorporated. All rights reserved.",TNT=TNT||{};TNT.a=function(){return{nestedMboxes:[],b:{companyName:"Test&amp;Target",isProduction:!0,adminUrl:"http://admin6.testandtarget.omniture.com/admin",clientCode:"computersciencescorp",serverHost:"computersciencescorp.tt.omtrdc.net",mboxTimeout:15e3,mboxLoadedTimeout:100,cleanupTimeout:1e3,mboxFactoryDisabledTimeout:1800,bodyPollingTimeout:16,bodyHidingEnabled:!1,bodyHiddenStyle:"body{opacity:0}",sessionExpirationTimeout:1860,experienceManagerDisabledTimeout:1800,experienceManagerTimeout:5e3,visitorApiTimeout:500,visitorApiPageDisplayTimeout:500,overrideMboxEdgeServer:!1,overrideMboxEdgeServerTimeout:1860,tntIdLifetime:1209600,crossDomain:"disabled",trafficDuration:10368e3,trafficLevelPercentage:100,clientSessionIdSupport:!1,clientTntIdSupport:!1,passPageParameters:!0,usePersistentCookies:!0,crossDomainEnabled:!1,crossDomainXOnly:!1,imsOrgId:"5C82123F5245AFBF0A490D45@AdobeOrg",globalMboxName:"target-global-mbox",globalMboxLocationDomId:"",globalMboxAutoCreate:!0,experienceManagerPluginUrl:"//cdn.tt.omtrdc.net/cdn/target.js",siteCatalystPluginName:"tt",mboxVersion:60,mboxIsSupportedFunction:function(){return!0},parametersFunction:function(){return""},cookieDomainFunction:function(){return mboxCookiePageDomain()}},c:{d:"mboxPage",e:"mboxMCGVID",f:"mboxMCGLH",g:"mboxAAMB",h:"mboxMCAVID",i:"mboxMCSDID",j:"mboxCount",k:"mboxHost",l:"mboxFactoryId",m:"mboxPC",n:"screenHeight",o:"screenWidth",p:"browserWidth",q:"browserHeight",r:"browserTimeOffset",s:"colorDepth",t:"mboxXDomain",u:"mboxURL",v:"mboxReferrer",w:"mboxVersion",x:"mbox",y:"mboxId",z:"mboxDOMLoaded",A:"mboxTime",B:"scPluginVersion"},C:{D:"mboxDisable",E:"mboxSession",F:"mboxEnv",G:"mboxDebug"},H:{D:"disable",E:"session",m:"PC",I:"level",J:"check",G:"debug",K:"em-disabled",L:"mboxEdgeServer"},M:{N:"default",O:"mbox",P:"mboxImported-",Q:6e4,R:"mboxDefault",S:"mboxMarker-",T:250,B:1,U:"mboxedge",V:"tt.omtrdc.net"}}}(),TNT.a.W={},function(t){function e(t){return void 0===t}function o(t){return null===t}function n(t){return e(t)||o(t)?!0:0===t.length}function i(t){return"[object Function]"===u.call(t)}function r(t){return"[object Array]"===u.call(t)}function a(t){return"[object String]"===u.call(t)}function s(t){return"[object Object]"===u.call(t)}function c(t,e){for(var o=t.length,n=-1;++n<o;)e(t[n])}var u={}.toString;t.Z=e,t.ab=o,t.bb=n,t.cb=i,t.db=r,t.eb=a,t.fb=s,t.gb=c}(TNT.a.W),mboxUrlBuilder=function(t,e){this.lb=t,this.mb=e,this.nb=[],this.ob=function(t){return t},this.pb=null},mboxUrlBuilder.prototype={constructor:mboxUrlBuilder,addNewParameter:function(t,e){return this.nb.push({name:t,value:e}),this},addParameterIfAbsent:function(t,e){if(e){for(var o=0;o<this.nb.length;o++){var n=this.nb[o];if(n.name===t)return this}return this.checkInvalidCharacters(t),this.addNewParameter(t,e)}},addParameter:function(t,e){this.checkInvalidCharacters(t);for(var o=0;o<this.nb.length;o++){var n=this.nb[o];if(n.name===t)return n.value=e,this}return this.addNewParameter(t,e)},addParameters:function(t){if(!t)return this;for(var e=0;e<t.length;e++){var o=t[e],n=o.indexOf("=");-1!==n&&0!==n&&this.addParameter(o.substring(0,n),o.substring(n+1,o.length))}return this},setServerType:function(t){this.wb=t},setBasePath:function(t){this.pb=t},setUrlProcessAction:function(t){this.ob=t},buildUrl:function(){for(var t=TNT.a.zb(this.lb),e=this.pb?this.pb:"/m2/"+this.mb+"/mbox/"+this.wb,o="file:"==document.location.protocol?"http:":document.location.protocol,n=o+"//"+t+e,i=[],r=0;r<this.nb.length;r++){var a=this.nb[r];i.push(encodeURIComponent(a.name)+"="+encodeURIComponent(a.value))}return n+=-1!=n.indexOf("?")?"&"+i.join("&"):"?"+i.join("&"),this.Db(this.ob(n))},getParameters:function(){return this.nb},setParameters:function(t){this.nb=t},clone:function(){var t=new mboxUrlBuilder(this.lb,this.mb);t.setServerType(this.wb),t.setBasePath(this.pb),t.setUrlProcessAction(this.ob);for(var e=0;e<this.nb.length;e++)t.addParameter(this.nb[e].name,this.nb[e].value);return t},Db:function(t){return t.replace(/\"/g,"&quot;").replace(/>/g,"&gt;")},checkInvalidCharacters:function(t){var e=new RegExp("('|\")");if(e.exec(t))throw"Parameter '"+t+"' contains invalid characters"}},TNT.a.Hb=function(){function t(t,i){n+=1,o[t]=i,e()}function e(){var t,e=i.length,r=-1;if(n===o.length&&i.length)for(;++r<e;)t=i[r],t.fn.apply(t.ctx,o)}var o=[],n=0,i=[];return{Qb:function(){var e=o.length;return o[o.length]=null,function(){t(e,[].slice.call(arguments))}},Rb:function(t,o){i.push({fn:t,ctx:o}),e()}}},function(t,e,o,n,i){function r(o){var n,i=function(t){return"vst."+t};return e.cb(o.getCustomerIDs)?(n=o.getCustomerIDs(),e.fb(n)?t.Yb(n,[],i):[]):[]}function a(t){var o=[];return e.gb(t,function(t){o.push(t[0])}),o}function s(t){return!e.bb(t.value)}function c(t,o,n,i){var r;e.cb(o[n])&&(r=t.Qb(),o[n](function(t){r({key:i,value:t})},!0))}function u(t,e,n){n(t,e,"getMarketingCloudVisitorID",o.e),n(t,e,"getAudienceManagerBlob",o.g),n(t,e,"getAnalyticsVisitorID",o.h),n(t,e,"getAudienceManagerLocationHint",o.f)}function d(t,o,n,i){return n?void i({optout:n,params:[]}):(u(t,o,c),void t.Rb(function(){var t=a([].slice.call(arguments)),c=[];e.gb(t,function(t){s(t)&&c.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))}),c.push.apply(c,r(o)),i({optout:n,params:c})}))}function m(t){var o;return e.bb(t)||e.Z(window.Visitor)||!e.cb(window.Visitor.getInstance)?null:(o=window.Visitor.getInstance(t),e.Z(o)||e.ab(o)||!o.isAllowed()?null:o)}function h(){return!e.ab(m(n.imsOrgId))}function f(t){var o,r=n.imsOrgId,a=n.visitorApiTimeout,s=i();return o=m(r),e.ab(o)?void t(null):(e.Z(o.loadTimeout)||(o.loadTimeout=a),void(e.cb(o.isOptedOut)&&!e.Z(window.Visitor.OptOut)?o.isOptedOut(function(e){d(s,o,e,t)},window.Visitor.OptOut.GLOBAL,!0):d(s,o,!1,t)))}function l(t){var o=n.imsOrgId,i=n.clientCode,r=m(o);return e.ab(r)||!e.cb(r.getSupplementalDataID)?"":r.getSupplementalDataID("mbox:"+i+":"+t)}t.mc=h,t.nc=f,t.pc=l}(TNT.a,TNT.a.W,TNT.a.c,TNT.a.b,TNT.a.Hb),mboxStandardFetcher=function(){},mboxStandardFetcher.prototype={constructor:mboxStandardFetcher,getType:function(){return"standard"},fetch:function(t){t.setServerType(this.getType()),document.write('<script src="'+t.buildUrl()+'"></script>')},cancel:function(){}},mboxAjaxFetcher=function(){},mboxAjaxFetcher.prototype={constructor:mboxAjaxFetcher,getType:function(){return"ajax"},fetch:function(t){t.setServerType(this.getType());var e=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=t.buildUrl(),e.appendChild(o)},cancel:function(){}},function(t){function e(){}e.prototype={constructor:e,getType:function(){return"ajax"},fetch:function(t){t.setServerType(this.getType()),document.write('<script src="'+t.buildUrl()+'"></script>')},cancel:function(){}},t.tc=e}(TNT.a),mboxMap=function(){this.uc={},this.vc=[]},mboxMap.prototype={constructor:mboxMap,put:function(t,e){this.uc[t]||(this.vc[this.vc.length]=t),this.uc[t]=e},get:function(t){return this.uc[t]},remove:function(t){var e=[];this.uc[t]=void 0;for(var o=0;o<this.vc.length;o++)this.vc[o]!==t&&e.push(this.vc[o]);this.vc=e},each:function(t){for(var e=0;e<this.vc.length;e++){var o=this.vc[e],n=this.uc[o];if(n){var i=t(o,n);if(i===!1)break}}},isEmpty:function(){return 0===this.vc.length}},mboxList=function(){this.xc=[]},mboxList.prototype={constructor:mboxList,add:function(t){t&&this.xc.push(t)},get:function(t){for(var e=new mboxList,o=0;o<this.xc.length;o++){var n=this.xc[o];n.getName()===t&&e.add(n)}return e},getById:function(t){return this.xc[t]},length:function(){return this.xc.length},each:function(t){var e=TNT.a.W;if(!e.cb(t))throw"Action must be a function, was: "+typeof t;for(var o=0;o<this.xc.length;o++)t(this.xc[o])}},mboxSignaler=function(t){this.zc=t},mboxSignaler.prototype={constructor:mboxSignaler,signal:function(t,e){if(this.zc.isEnabled()){var o=mboxSignaler.Cc(),n=this.Ec(this.zc.Fc(e));o.appendChild(n);var i=[].slice.call(arguments,1),r=this.zc.create(e,i,n),a=r.getUrlBuilder();a.addParameter(TNT.a.c.d,mboxGenerateId()),r.setFetcher(new mboxAjaxFetcher),r.load()}},Ec:function(t){var e=document.createElement("div");return e.id=t,e.style.visibility="hidden",e.style.display="none",e}},mboxSignaler.Cc=function(){return document.body},mboxLocatorDefault=function(t){this.Hc=t,document.write('<div id="'+this.Hc+'" style="visibility:hidden;display:none">&nbsp;</div>')},mboxLocatorDefault.prototype={constructor:mboxLocatorDefault,locate:function(){for(var t=1,e=document.getElementById(this.Hc);e;){if(e.nodeType===t&&"mboxDefault"===e.className)return e;e=e.previousSibling}return null},force:function(){var t=document.getElementById(this.Hc),e=document.createElement("div");return e.className="mboxDefault",t&&t.parentNode.insertBefore(e,t),e}},mboxLocatorNode=function(t){this.Jc=t},mboxLocatorNode.prototype={constructor:mboxLocatorNode,locate:function(){return"string"==typeof this.Jc?document.getElementById(this.Jc):this.Jc},force:function(){return null}},mboxOfferContent=function(){this.Mc=function(){}},mboxOfferContent.prototype={constructor:mboxOfferContent,show:function(t){var e=t.showContent(document.getElementById(t.getImportName()));return 1===e&&this.Mc(),e},setOnLoad:function(t){this.Mc=t}},mboxOfferAjax=function(t){this.Nc=t,this.Mc=function(){}},mboxOfferAjax.prototype={constructor:mboxOfferAjax,setOnLoad:function(t){this.Mc=t},show:function(t){var e,o=document.createElement("div");return o.id=t.getImportName(),o.innerHTML=this.Nc,e=t.showContent(o),1===e&&this.Mc(),e}},mboxOfferDefault=function(){this.Mc=function(){}},mboxOfferDefault.prototype={constructor:mboxOfferDefault,show:function(t){var e=t.hide();return 1===e&&this.Mc(),e},setOnLoad:function(t){this.Mc=t}},mboxCookieManager=function(t,e){this.qb=t,this.Qc=TNT.a.H.J,this.Rc=TNT.a.b.crossDomainXOnly,this.Sc=TNT.a.H.D,this.Tc=TNT.a.b.usePersistentCookies,this.Uc=new mboxMap,this.Pc=""===e||-1===e.indexOf(".")?"":"; domain="+e,this.loadCookies()},mboxCookieManager.prototype={constructor:mboxCookieManager,isEnabled:function(){return this.setCookie(this.Qc,"true",60),this.loadCookies(),"true"==this.getCookie(this.Qc)},setCookie:function(t,e,o){if("undefined"!=typeof t&&"undefined"!=typeof e&&"undefined"!=typeof o){var n=Math.ceil(o+(new Date).getTime()/1e3),i=mboxCookieManager.Yc(t,encodeURIComponent(e),n);this.Uc.put(t,i),this.saveCookies()}},getCookie:function(t){var e=this.Uc.get(t);return e?decodeURIComponent(e.value):null},deleteCookie:function(t){this.Uc.remove(t),this.saveCookies()},getCookieNames:function(t){var e=[];return this.Uc.each(function(o,n){0===o.indexOf(t)&&(e[e.length]=o)}),e},saveCookies:function(){var t=this,e=[],o=0;this.Uc.each(function(n,i){t.Rc&&n!==t.Sc||(e[e.length]=mboxCookieManager.dd(i),o<i.expireOn&&(o=i.expireOn))});var n=new Date(1e3*o),i=[];i.push(this.qb,"=",e.join("|")),t.Tc&&i.push("; expires=",n.toGMTString()),i.push("; path=/",this.Pc),document.cookie=i.join("")},loadCookies:function(){var t=mboxCookieManager.gd(this.qb),e=mboxCookieManager.id(t),o=Math.ceil((new Date).getTime()/1e3);this.Uc=new mboxMap;for(var n=0;n<e.length;n++){var i=mboxCookieManager.kd(e[n]);o>i.expireOn||this.Uc.put(i.name,i)}}},mboxCookieManager.dd=function(t){return t.name+"#"+t.value+"#"+t.expireOn},mboxCookieManager.kd=function(t){var e=t.split("#");return mboxCookieManager.Yc(e[0],e[1],e[2])},mboxCookieManager.Yc=function(t,e,o){return{name:t,value:e,expireOn:o}},mboxCookieManager.gd=function(t){var e=new RegExp("(^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie);return e?e[2]:null},mboxCookieManager.id=function(t){return t?t.split("|"):[]},mboxSession=function(t,e,o,n,i){var r=window.mboxForceSessionId;this.nd=o,this.od=n,this.pd=i,this.Gc="undefined"!=typeof r?r:mboxGetPageParameter(e,!0),this.Gc=this.Gc||i.getCookie(o)||t,this.pd.setCookie(o,this.Gc,n)},mboxSession.prototype={constructor:mboxSession,getId:function(){return this.Gc},forceId:function(t){this.Gc=t,this.pd.setCookie(this.nd,this.Gc,this.od)}},mboxPC=function(t,e,o){var n=window.mboxForcePCId;this.nd=t,this.od=e,this.pd=o,this.Gc="undefined"!=typeof n?n:o.getCookie(t),this.Gc&&o.setCookie(t,this.Gc,e)},mboxPC.prototype={constructor:mboxPC,getId:function(){return this.Gc},forceId:function(t){return this.Gc===t?!1:(this.Gc=t,this.pd.setCookie(this.nd,this.Gc,this.od),!0)}},function(t,e,o,n,i){function r(t){var e=c.exec(t);return e&&2===e.length?i.U+e[1]+"."+i.V:""}function a(t,i){var a=r(i);e.bb(a)||t.setCookie(o.L,a,n.overrideMboxEdgeServerTimeout)}function s(t,e){this.Ad=t,this.pd=e,a(e,t.getId())}var c=new RegExp(".*\\.(\\d+)_\\d+");s.prototype={constructor:s,getId:function(){return this.Ad.getId()},forceId:function(t){return this.Ad.forceId(t)?(a(this.pd,t),!0):!1}},t.zd=s}(TNT.a,TNT.a.W,TNT.a.H,TNT.a.b,TNT.a.M),mboxGetPageParameter=function(t,e){e=e||!1;var o;o=e?new RegExp("\\?[^#]*"+t+"=([^&;#]*)","i"):new RegExp("\\?[^#]*"+t+"=([^&;#]*)");var n=null,i=o.exec(document.location);return i&&i.length>=2&&(n=i[1]),n},mboxCookiePageDomain=function(){var t=/([^:]*)(:[0-9]{0,5})?/.exec(document.location.host)[1],e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/;if(!e.exec(t)){var o=/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/.exec(t);o&&(t=o[0],0===t.indexOf("www.")&&(t=t.substr(4)))}return t?t:""},mboxShiftArray=function(t){for(var e=[],o=1;o<t.length;o++)e[e.length]=t[o];return e},mboxGenerateId=function(){return(new Date).getTime()+"-"+Math.floor(999999*Math.random())},mboxScreenHeight=function(){return screen.height},mboxScreenWidth=function(){return screen.width},mboxBrowserWidth=function(){return window.innerWidth?window.innerWidth:document.documentElement?document.documentElement.clientWidth:document.body.clientWidth},mboxBrowserHeight=function(){return window.innerHeight?window.innerHeight:document.documentElement?document.documentElement.clientHeight:document.body.clientHeight},mboxBrowserTimeOffset=function(){return-(new Date).getTimezoneOffset()},mboxScreenColorDepth=function(){return screen.pixelDepth},mbox=function(t,e,o,n,i,r){this.Jd=null,this.Kd=0,this.Ld=n,this.Id=i,this.Md=null,this.Nd=new mboxOfferContent,this.Lc=null,this.qc=o,this.message="",this.Od={},this.Pd=0,this.Qd=5,this.Gc=e,this.qb=t,this.Rd(),o.addParameter(TNT.a.c.x,t),o.addParameter(TNT.a.c.y,e),this.Sd=function(){},this.Mc=function(){},this.Td=null,this.Ud=document.documentMode>=10&&!r.isDomLoaded(),this.Ud&&(this.Vd=TNT.a.nestedMboxes,this.Vd.push(this.qb))},mbox.prototype.getId=function(){return this.Gc},mbox.prototype.Rd=function(){var t=TNT.a.M.T;if(this.qb.length>t)throw"Mbox Name "+this.qb+" exceeds max length of "+t+" characters.";if(this.qb.match(/^\s+|\s+$/g))throw"Mbox Name "+this.qb+" has leading/trailing whitespace(s)."},mbox.prototype.getName=function(){return this.qb},mbox.prototype.getParameters=function(){for(var t=this.qc.getParameters(),e=[],o=0;o<t.length;o++)0!==t[o].name.indexOf("mbox")&&(e[e.length]=t[o].name+"="+t[o].value);return e},mbox.prototype.setOnLoad=function(t){return this.Mc=t,this},mbox.prototype.setMessage=function(t){return this.message=t,this},mbox.prototype.setOnError=function(t){return this.Sd=t,this},mbox.prototype.setFetcher=function(t){return this.Md&&this.Md.cancel(),this.Md=t,this},mbox.prototype.getFetcher=function(){return this.Md},mbox.prototype.load=function(t){var e=this.qc,o=this;return null===o.Md?o:(o.setEventTime("load.start"),o.cancelTimeout(),o.Kd=0,t&&t.length>0&&(e=o.qc.clone().addParameters(t)),TNT.a.mc()?TNT.a.nc(function(t){t.optout||(e.addParameters(t.params),Yd(e,o))}):Yd(e,o),o)},mbox.prototype.loaded=function(){if(this.cancelTimeout(),!this.activate()&&this.Pd<this.Qd){var t=this;setTimeout(function(){t.loaded()},TNT.a.b.mboxLoadedTimeout)}},mbox.prototype.activate=function(){return this.Kd?this.Kd:(this.setEventTime("activate"+ ++this.Pd+".start"),this.Ud&&this.Vd[this.Vd.length-1]!==this.qb?this.Kd:(this.show()&&(this.cancelTimeout(),this.Kd=1),this.setEventTime("activate"+this.Pd+".end"),this.Ud&&this.Vd.pop(),this.Kd))},mbox.prototype.isActivated=function(){return this.Kd},mbox.prototype.setOffer=function(t){var e=t&&t.show&&t.setOnLoad;if(!e)throw"Invalid offer";var o=TNT.a.b.globalMboxName===this.qb;if(o=o&&t instanceof mboxOfferDefault,o=o&&null!==this.Md,o=o&&"ajax"===this.Md.getType(),!o)return this.Nd=t,this;var n=this.Nd.Mc;return this.Nd=t,this.Nd.setOnLoad(n),this},mbox.prototype.getOffer=function(){return this.Nd},mbox.prototype.show=function(){this.setEventTime("show.start");var t=this.Nd.show(this);return this.setEventTime(1==t?"show.end.ok":"show.end"),t},mbox.prototype.showContent=function(t){return mbox.de(t)?(this.Lc=mbox.ee(this,this.Lc),null===this.Lc?0:mbox.fe(document.body,this.Lc)?this.Lc===t?(this.ge(this.Lc),this.Mc(),1):(this.he(this.Lc),this.he(t),mbox.ie(this,t),this.ge(this.Lc),this.Mc(),1):0):0},mbox.de=function(t){return void 0!==t&&null!==t},mbox.fe=function(t,e){var o=16,n=void 0!==t.contains;return n?t!==e&&t.contains(e):Boolean(t.compareDocumentPosition(e)&o)},mbox.ee=function(t,e){return void 0!==e&&null!==e&&mbox.fe(document.body,e)?e:t.getDefaultDiv()},mbox.ie=function(t,e){t.Lc.parentNode.replaceChild(e,t.Lc),t.Lc=e},mbox.prototype.hide=function(){this.setEventTime("hide.start");var t=this.showContent(this.getDefaultDiv());return this.setEventTime(1==t?"hide.end.ok":"hide.end.fail"),t},mbox.prototype.finalize=function(){this.setEventTime("finalize.start"),this.cancelTimeout(),this.getDefaultDiv()||(this.Ld.force()?this.setMessage("No default content, an empty one has been added"):this.setMessage("Unable to locate mbox")),this.activate()||(this.hide(),this.setEventTime("finalize.end.hide")),this.setEventTime("finalize.end.ok")},mbox.prototype.cancelTimeout=function(){this.Zd&&clearTimeout(this.Zd),this.Md&&this.Md.cancel()},mbox.prototype.getDiv=function(){return this.Lc},mbox.prototype.getDefaultDiv=function(){return null===this.Td&&(this.Td=this.Ld.locate()),this.Td},mbox.prototype.setEventTime=function(t){this.Od[t]=(new Date).getTime()},mbox.prototype.getEventTimes=function(){return this.Od},mbox.prototype.getImportName=function(){return this.Id},mbox.prototype.getURL=function(){return this.qc.buildUrl()},mbox.prototype.getUrlBuilder=function(){return this.qc},mbox.prototype.oe=function(t){return"none"!=t.style.display},mbox.prototype.ge=function(t){this.pe(t,!0)},mbox.prototype.he=function(t){this.pe(t,!1)},mbox.prototype.pe=function(t,e){t.style.visibility=e?"visible":"hidden",t.style.display=e?"block":"none"},mbox.prototype.re=function(){this.Ud=!1},mbox.prototype.relocateDefaultDiv=function(){this.Td=this.Ld.locate()},mboxFactory=function(t,e,o){var n=TNT.a,i=n.b,r=n.W,a=n.H,s=n.C,c=n.M,u=i.mboxVersion;this.we=!1,this.te=o,this.xc=new mboxList,mboxFactories.put(o,this),this.xe=i.mboxIsSupportedFunction()&&"undefined"!=typeof(window.attachEvent||document.addEventListener||window.addEventListener),this.ye=this.xe&&null===mboxGetPageParameter(s.D,!0);var d=o==c.N,m=c.O+(d?"":"-"+o);this.pd=new mboxCookieManager(m,i.cookieDomainFunction()),i.crossDomainXOnly||(this.ye=this.ye&&this.pd.isEnabled()),this.ye=this.ye&&r.ab(this.pd.getCookie(a.D))&&r.ab(this.pd.getCookie(a.K)),this.isAdmin()&&this.enable(),this.Ae(),this.Be=mboxGenerateId(),this.Ce=mboxScreenHeight(),this.De=mboxScreenWidth(),this.Ee=mboxBrowserWidth(),this.Fe=mboxBrowserHeight(),this.Ge=mboxScreenColorDepth(),this.He=mboxBrowserTimeOffset(),this.Ie=new mboxSession(this.Be,s.E,a.E,i.sessionExpirationTimeout,this.pd);var h=new mboxPC(a.m,i.tntIdLifetime,this.pd);this.Je=i.overrideMboxEdgeServer?new n.zd(h,this.pd):h,this.qc=new mboxUrlBuilder(t,e),this.Ke(this.qc,d,u),this.Le=(new Date).getTime(),this.Me=this.Le;var f=this;this.addOnLoad(function(){f.Me=(new Date).getTime()}),this.xe&&(this.addOnLoad(function(){f.we=!0,n.mc()?setTimeout(function(){se(f)},i.cleanupTimeout):se(f),TNT.a.nestedMboxes=[]}),this.ye?(this.limitTraffic(i.trafficLevelPercentage,i.trafficDuration),this.Ne(),this.Oe=new mboxSignaler(this)):i.isProduction||this.isAdmin()&&(this.isEnabled()?alert("It looks like your browser will not allow "+i.companyName+" to set its administrative cookie. To allow setting the cookie please lower the privacy settings of your browser.\n(this message will only appear in administrative mode)"):alert("mbox disabled, probably due to timeout\nReset your cookies to re-enable\n(this message will only appear in administrative mode)")))},mboxFactory.prototype.forcePCId=function(t){TNT.a.b.clientTntIdSupport&&this.Je.forceId(t)&&this.Ie.forceId(mboxGenerateId())},mboxFactory.prototype.forceSessionId=function(t){TNT.a.b.clientSessionIdSupport&&this.Ie.forceId(t)},mboxFactory.prototype.isEnabled=function(){return this.ye},mboxFactory.prototype.getDisableReason=function(){return this.pd.getCookie(TNT.a.H.D)},mboxFactory.prototype.isSupported=function(){return this.xe},mboxFactory.prototype.disable=function(t,e){"undefined"==typeof t&&(t=3600),"undefined"==typeof e&&(e="unspecified"),this.isAdmin()||(this.ye=!1,this.pd.setCookie(TNT.a.H.D,e,t))},mboxFactory.prototype.enable=function(){this.ye=!0,this.pd.deleteCookie(TNT.a.H.D)},mboxFactory.prototype.isAdmin=function(){return-1!=document.location.href.indexOf(TNT.a.C.F)},mboxFactory.prototype.limitTraffic=function(t,e){if(100!=TNT.a.b.trafficLevelPercentage){if(100==t)return;var o=!0;parseInt(this.pd.getCookie(TNT.a.H.I))!=t&&(o=100*Math.random()<=t),this.pd.setCookie(TNT.a.H.I,t,e),o||this.disable(3600,"limited by traffic")}},mboxFactory.prototype.addOnLoad=function(t){if(this.isDomLoaded())t();else{var e=!1,o=function(){e||(e=!0,t())};this.Ve.push(o),this.isDomLoaded()&&!e&&o()}},mboxFactory.prototype.getEllapsedTime=function(){return this.Me-this.Le},mboxFactory.prototype.getEllapsedTimeUntil=function(t){return t-this.Le},mboxFactory.prototype.getMboxes=function(){return this.xc},mboxFactory.prototype.get=function(t,e){return this.xc.get(t).getById(e||0)},mboxFactory.prototype.update=function(t,e){var o=TNT.a,n=o.c;if(this.isEnabled()){var i=this;if(!this.isDomLoaded())return void this.addOnLoad(function(){i.update(t,e)});if(0===this.xc.get(t).length())throw"Mbox "+t+" is not defined";this.xc.get(t).each(function(o){var r=o.getUrlBuilder();r.addParameter(n.d,mboxGenerateId()),i.We(r,t),i.Xe(r),i.Ye(r,t),o.load(e)})}},mboxFactory.prototype.setVisitorIdParameters=function(t,e){var o,n=TNT.a,i=n.W,r=n.c,a=n.b.imsOrgId,s=function(e,o,n){var r;i.Z(e[n])||(r=e[n](),i.Z(r)||t.addParameter(o,r))};n.mc()&&(o=Visitor.getInstance(a),s(o,r.e,"getMarketingCloudVisitorID"),s(o,r.f,"getAudienceManagerLocationHint"),s(o,r.g,"getAudienceManagerBlob"),s(o,r.h,"getAnalyticsVisitorID"),this.We(t,e))},mboxFactory.prototype.create=function(t,e,o){var n=this.cf(t,e,o);return n&&this.We(n.getUrlBuilder(),t),n},mboxFactory.prototype.df=function(t,e,o){return this.cf(t,e,o)},mboxFactory.prototype.cf=function(t,e,o){if(!this.isSupported())return null;var n=new Date,i=n.getTime()-n.getTimezoneOffset()*TNT.a.M.Q,r=this.qc.clone();r.addParameter(TNT.a.c.j,this.xc.length()+1),r.addParameter(TNT.a.c.A,i),r.addParameters(e),this.Xe(r),this.Ye(r,t);var a,s,c;if(o)s=new mboxLocatorNode(o);else{if(this.we)throw"The page has already been loaded, can't write marker";s=new mboxLocatorDefault(this.Fc(t))}try{a=this.xc.get(t).length(),c=new mbox(t,a,r,s,this.ff(t),this),this.ye&&(TNT.a.mc()?c.setFetcher(new mboxAjaxFetcher):c.setFetcher(this.we?new mboxAjaxFetcher:new mboxStandardFetcher));var u=this;c.setOnError(function(t,e){c.setMessage(t),c.activate(),c.isActivated()||(u.disable(TNT.a.b.mboxFactoryDisabledTimeout,t),window.location.reload(!1))}),this.xc.add(c)}catch(d){throw this.disable(),'Failed creating mbox "'+t+'", the error was: '+d}return c},mboxFactory.prototype.Xe=function(t){var e=this.Je.getId();e&&t.addParameter(TNT.a.c.m,e)},mboxFactory.prototype.We=function(t,e){var o=TNT.a,n=o.c.i,i=o.pc(e);i&&t.addParameter(n,i)},mboxFactory.prototype.Ye=function(t,e){var o=!TNT.isAutoCreateGlobalMbox()&&TNT.getGlobalMboxName()===e;o&&t.addParameters(TNT.getTargetPageParameters())},mboxFactory.prototype.getCookieManager=function(){return this.pd},mboxFactory.prototype.getPageId=function(){return this.Be},mboxFactory.prototype.getPCId=function(){return this.Je},mboxFactory.prototype.getSessionId=function(){return this.Ie},mboxFactory.prototype.getSignaler=function(){return this.Oe},mboxFactory.prototype.getUrlBuilder=function(){return this.qc},mboxFactory.prototype.kf=function(t){return this.te+"-"+t+"-"+this.xc.get(t).length()},mboxFactory.prototype.Fc=function(t){return TNT.a.M.S+this.kf(t)},mboxFactory.prototype.ff=function(t){return TNT.a.M.P+this.kf(t)},mboxFactory.prototype.Ke=function(t,e,o){t.addParameter(TNT.a.c.k,document.location.hostname),t.addParameter(TNT.a.c.d,this.Be),t.addParameter(TNT.a.c.n,this.Ce),t.addParameter(TNT.a.c.o,this.De),t.addParameter(TNT.a.c.p,this.Ee),t.addParameter(TNT.a.c.q,this.Fe),t.addParameter(TNT.a.c.r,this.He),t.addParameter(TNT.a.c.s,this.Ge),t.addParameter(TNT.a.C.E,this.Ie.getId()),e||t.addParameter(TNT.a.c.l,this.te),this.Xe(t),TNT.a.b.crossDomainEnabled&&t.addParameter(TNT.a.c.t,TNT.a.b.crossDomain);var n=TNT.getClientMboxExtraParameters();n&&t.addParameters(n.split("&")),t.setUrlProcessAction(function(t){if(TNT.a.b.passPageParameters){t+="&",t+=TNT.a.c.u,t+="="+encodeURIComponent(document.location);var e=encodeURIComponent(document.referrer);t.length+e.length<2e3&&(t+="&",t+=TNT.a.c.v,t+="="+e)}return t+="&",t+=TNT.a.c.w,t+="="+o})},mboxFactory.prototype.Ne=function(){document.write("<style>."+TNT.a.M.R+" { visibility:hidden; }</style>")},mboxFactory.prototype.isDomLoaded=function(){return this.we},mboxFactory.prototype.Ae=function(){if(!this.Ve){this.Ve=[];var t=this;!function(){var e=document.addEventListener?"DOMContentLoaded":"onreadystatechange",o=!1,n=function(){if(!o){o=!0;for(var e=0;e<t.Ve.length;++e)t.Ve[e]()}};if(document.addEventListener)document.addEventListener(e,function(){document.removeEventListener(e,arguments.callee,!1),n()},!1),window.addEventListener("load",function(){document.removeEventListener("load",arguments.callee,!1),n()},!1);else if(document.attachEvent)if(self!==self.top)document.attachEvent(e,function(){"complete"===document.readyState&&(document.detachEvent(e,arguments.callee),n())});else{var i=function(){try{document.documentElement.doScroll("left"),n()}catch(t){setTimeout(i,13)}};i()}"complete"===document.readyState&&n()}()}},function(t){function e(t,e,o,n){t.targetJSLoaded||(n.setCookie(e,!0,o),window.location.reload())}function o(t,o,n){var i="_AT",r=50,a=o.K,s=t.experienceManagerDisabledTimeout,c=t.experienceManagerTimeout,u=t.experienceManagerPluginUrl,d=function(t){},m=function(t){setTimeout(function(){window[i].applyWhenReady(t)},r)};i in window||(window[i]={},"true"!==n.getCookie(a)?(document.write('<script src="'+u+'"></script>'),window[i].applyWhenReady=m,setTimeout(function(){e(window[i],a,s,n)},c)):window[i].applyWhenReady=d)}t.sf=o}(TNT.a),function(t,e,o,n,i,r){function a(){return n.globalMboxName}function s(){return n.globalMboxLocationDomId}function c(){return n.globalMboxAutoCreate}function u(){return n.parametersFunction()}function d(){for(var t=1,e=document.getElementsByTagName("script"),o=e[e.length-1];o;){if(o.nodeType===t&&o.className===r.R)return o;o=o.previousSibling}return null}function m(t,o,n){var i,r;return e.mc()?(i=d(),r=t.create(o,n,i)):r=t.create(o,n),r&&t.isEnabled()&&r.load(),r}function h(t,e,o,n){return t.df(o,n,e)}function f(t,e,o){t.update(e,o)}function l(t,e){return t.getCookie(e)}function b(t,e,o,n){t.setCookie(e,o,n)}function p(t){for(var e=[],o=/([^&=]+)=([^&]*)/g,n=decodeURIComponent,i=o.exec(t);i;)e.push([n(i[1]),n(i[2])].join("=")),i=o.exec(t);return e}function x(t,e,n){var i=[];for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];o.fb(a)?(e.push(r),i=i.concat(x(a,e,n)),e.pop()):e.length>0?i.push([n(e.concat(r).join(".")),a].join("=")):i.push([n(r),a].join("="))}return i}function g(){var t=window.targetPageParams,e=function(t){return t};if(!o.cb(t))return[];var n=null;try{n=t()}catch(i){}return o.ab(n)?[]:o.db(n)?n:o.eb(n)&&!o.bb(n)?p(n):o.fb(n)?x(n,[],e):[]}function T(t){var o,i,r,c=a(),u=s(),d=g();u||(u="mbox-"+c+"-"+mboxGenerateId(),o=document.createElement("div"),o.className="mboxDefault",o.id=u,o.style.visibility="hidden",o.style.display="none",i=setInterval(function(){document.body&&(clearInterval(i),document.body.insertBefore(o,document.body.firstChild))},n.bodyPollingTimeout)),r=t.create(c,d,u),r&&t.isEnabled()&&(t.isDomLoaded()||(e.mc()?r.setFetcher(new mboxAjaxFetcher):r.setFetcher(new e.tc)),r.load())}function y(t,e,o){if(t.isEnabled()){var a=new Date,s=a.getTimezoneOffset()*r.Q,c=t.getUrlBuilder().clone();return c.setBasePath("/m2/"+n.clientCode+"/viztarget"),c.addParameter(i.x,e),c.addParameter(i.y,0),c.addParameter(i.j,t.getMboxes().length()+1),c.addParameter(i.A,a.getTime()-s),c.addParameter(i.d,mboxGenerateId()),c.addParameter(i.z,t.isDomLoaded()),o&&o.length>0&&c.addParameters(o),t.Xe(c),t.Ye(c,e),t.We(c,e),c.buildUrl()}}function v(){return new mboxMap}function w(t,e,o){return new mboxFactory(t,e,o)}function N(){if(n.bodyHidingEnabled){var t=document.getElementsByTagName("head")[0],e=document.createElement("style");e.id="at-id-body-style",e.innerHTML=n.bodyHiddenStyle,t&&t.appendChild(e)}}function C(){n.bodyHidingEnabled&&setTimeout(function(){var t=document.getElementsByTagName("head")[0],e=document.getElementById("at-id-body-style");t&&e&&t.removeChild(e)},n.visitorApiPageDisplayTimeout)}e.Ff=m,e.Gf=h,e.Hf=f,e.Zf=y,e.If=l,e.Jf=b,e.Sf=T,e.ag=v,e.bg=w,e.Yb=x,e.fg=C,e.dg=N,t.getGlobalMboxName=a,t.getGlobalMboxLocation=s,t.isAutoCreateGlobalMbox=c,t.getClientMboxExtraParameters=u,t.getTargetPageParameters=g}(TNT,TNT.a,TNT.a.W,TNT.a.b,TNT.a.c,TNT.a.M),function(t){function e(t,e,o,n){var i=3600,r=mboxGetPageParameter(o,!0)||t.getCookie(n);if(r){setTimeout(function(){"undefined"==typeof window.mboxDebugLoaded&&alert("Could not load the remote debug.\nPlease check your connection to "+e.companyName+" servers")},i);var a=[];a.push(e.adminUrl,"/mbox/mbox_debug.jsp","?"),a.push("mboxServerHost","=",e.serverHost,"&"),a.push("clientCode","=",e.clientCode),document.write('<script src="'+a.join("")+'"></script>')}}function o(e,o){var n,i,r,a=t.W;if(a.Z(e)||a.ab(e)||!a.fb(e))return o;for(var s in e)n=e.hasOwnProperty(s)&&o.hasOwnProperty(s),r=e[s],i=!a.Z(r)&&!a.ab(r),n&&i&&(o[s]=r);return o}function n(e,o){TNT.createGlobalMbox=function(){t.Sf(e)},window.mboxCreate=function(o){var n=[].slice.call(arguments,1);return t.Ff(e,o,n)},window.mboxDefine=function(o,n){var i=[].slice.call(arguments,2);return t.Gf(e,o,n,i)},window.mboxUpdate=function(o){var n=[].slice.call(arguments,1);t.Hf(e,o,n)},window.mboxVizTargetUrl=function(o){var n=[].slice.call(arguments,1);return t.Zf(e,o,n)},window.mboxSetCookie=function(e,n,i){return t.Jf(o,e,n,i)},window.mboxGetCookie=function(e){return t.If(o,e)},"undefined"!=typeof t.qg&&(window.mboxLoadSCPlugin=function(o){return t.qg(e,o)})}function i(){if("undefined"==typeof window.mboxVersion){t.b=o(window.targetGlobalSettings,t.b);var i,r,a=t.b,s=a.mboxVersion,c=a.serverHost,u=a.clientCode,d=t.M.N,m=t.C.G,h=t.H.G,f=t.H.L;window.mboxFactories=t.ag(),window.mboxFactoryDefault=i=t.bg(c,u,d),window.mboxVersion=s,r=i.getCookieManager(),n(i,r),e(r,a,m,h),t.zb=function(t){var e;return a.overrideMboxEdgeServer?(e=r.getCookie(f),null===e?t:e):t}}}t.sg=i}(TNT.a),TNT.a.sg(),TNT.a.sf(TNT.a.b,TNT.a.H,window.mboxFactoryDefault.getCookieManager()),TNT.isAutoCreateGlobalMbox()&&(TNT.a.dg(),TNT.createGlobalMbox(),TNT.a.fg());
//# sourceMappingURL=/javascripts/user/mbox_js.js.map